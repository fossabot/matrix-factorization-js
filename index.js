"use strict";function n(n,t,r,e,i,c,v){var l=0;return a(n,function(n){a(t,function(t){var d=r[n][t];if(d>0){var h=u(c[n],o(v,t));l+=f(d-h),a(e,function(r){l+=i/2*(f(c[n][r])+f(v[r][t]))})}})}),l}function t(n){return r(n)?c(n[0].length,n.length,function(){return 0}).map(function(t,r){return t.map(function(t,u){return n[u][r]})}):n}function r(n){return Array.isArray(n[0])}function u(n,u){var o=t(u);return r(n)||r(u)?n.map(function(n){return o.map(function(t){return e(n,t)})}):e(n,u)}function o(n,t){return n.map(function(n){return n[t]})}function e(n,t){return i(n,t,function(n,t){return n*t}).reduce(function(n,t){return n+t})}function i(n,t,r){return n.map(function(n,u){return r(n,t[u])})}function f(n){return Math.pow(n,2)}function c(n,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return 0},u=[],o=0;o<n;o++){u.push([]);for(var e=0;e<t;e++)u[o][e]=r()}return u}function a(n,t){for(var r=0;r<n;)t(r++)}var v={factorizeMatrix:function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e-4,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.02,l=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],r.length),d=r[0].length,h=c(l,e,function(){return Math.random()}),g=t(c(d,e,function(){return Math.random()})),m=r.length,p=r[0].length,s=function(n,t,r){return n+f*(2*r*t-v*n)};return a(i,function(){a(m,function(n){a(p,function(t){var i=r[n][t];if(i>0){var f=i-u(h[n],o(g,t));a(e,function(r){var u=h[n][r],o=g[r][t];h[n][r]=s(u,o,f),g[r][t]=s(o,u,f)})}})}),n(m,p,r,e,v,h,g)}),[h,t(g)]},fillMatrix:c,transpose:t,dot:u};"undefined"!=typeof module&&module.exports?module.exports=v:window.matrixFactorization=v;